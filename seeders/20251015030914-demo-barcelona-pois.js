'use strict';

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up(queryInterface, Sequelize) {
    const now = new Date();

    // Skipping insertion if the table is not empty
    const existingEntries = await queryInterface.sequelize.query(
      'SELECT COUNT(*) AS count FROM points_of_interest;',
      { type: Sequelize.QueryTypes.SELECT }
    );

    if (existingEntries[0].count > 0) {
      console.log('points_of_interest table is not empty. Skipping seeder.');
      return;
    }

    await queryInterface.bulkInsert('points_of_interest', [
      {
        id: '9CB40CB5D0',
        type: 'location',
        subType: 'POINT_OF_INTEREST',
        name: 'Casa Batlló',
        latitude: 41.39165,
        longitude: 2.164772,
        category: 'SIGHTS',
        rank: 5,
        tags: JSON.stringify([
          'sightseeing',
          'sights',
          'museum',
          'landmark',
          'tourguide',
          'restaurant',
          'attraction',
          'activities',
          'commercialplace',
          'shopping',
          'souvenir',
        ]),
        pictures: JSON.stringify([
          'https://www.casabatllo.es/wp-content/uploads/2025/06/Web_Facana-3.jpg.webp',
          'https://www.casabatllo.es/wp-content/uploads/2025/06/Web_Facana-1.jpg.webp',
          'https://www.casabatllo.es/wp-content/uploads/2025/06/Web_Facana-2.jpg.webp',
        ]),
        createdAt: now,
        updatedAt: now,
      },
      {
        id: '4690B83DCA',
        type: 'location',
        subType: 'POINT_OF_INTEREST',
        name: 'La Pepita',
        latitude: 41.397987,
        longitude: 2.161159,
        category: 'RESTAURANT',
        rank: 30,
        tags: JSON.stringify([
          'restaurant',
          'tapas',
          'pub',
          'bar',
          'sightseeing',
          'commercialplace',
        ]),
        pictures: JSON.stringify([
          'https://dynamic-media-cdn.tripadvisor.com/media/photo-o/0d/78/f6/c9/la-pepita.jpg?w=700&h=400&s=1',
          'https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2c/ae/dc/80/caption.jpg?w=1000&h=-1&s=1',
          'https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2c/89/fb/20/caption.jpg?w=1000&h=-1&s=1',
          'https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2c/89/fb/1f/caption.jpg?w=1000&h=-1&s=1'
        ]),
        createdAt: now,
        updatedAt: now,
      },
      {
        id: '3EF139D861',
        type: 'location',
        subType: 'POINT_OF_INTEREST',
        name: 'Brunch & Cake',
        latitude: 41.38827,
        longitude: 2.161604,
        category: 'RESTAURANT',
        rank: 30,
        tags: JSON.stringify([
          'vegetarian',
          'restaurant',
          'breakfast',
          'shopping',
          'bakery',
          'transport',
          'patio',
          'garden',
        ]),
        pictures: JSON.stringify([
          'https://brunchandcake.com/wp-content/uploads/2024/12/brunchandcake-spain-barcelona-granados-restaurant-franchise-europe.jpg',
          'https://brunchandcake.com/wp-content/uploads/2024/12/brunchandcake-barcelona-restaurant-franchise-spain-rosello.jpg',
        ]),
        createdAt: now,
        updatedAt: now,
      },
      {
        id: 'AB3F122E3E',
        type: 'location',
        subType: 'POINT_OF_INTEREST',
        name: 'Cervecería Catalana',
        latitude: 41.392376,
        longitude: 2.160919,
        category: 'RESTAURANT',
        rank: 30,
        tags: JSON.stringify([
          'restaurant',
          'tapas',
          'sightseeing',
          'traditionalcuisine',
          'bar',
          'activities',
          'commercialplace',
        ]),
        createdAt: now,
        updatedAt: now,
      },
      {
        id: '752402FCA2',
        type: 'location',
        subType: 'POINT_OF_INTEREST',
        name: 'Botafumeiro',
        latitude: 41.40043,
        longitude: 2.15463,
        category: 'RESTAURANT',
        rank: 30,
        tags: JSON.stringify([
          'restaurant',
          'seafood',
          'sightseeing',
          'professionalservices',
          'transport',
          'commercialplace',
        ]),
        createdAt: now,
        updatedAt: now,
      },
      {
        id: '5F1CED3994',
        type: 'location',
        subType: 'POINT_OF_INTEREST',
        name: 'Casa Amatller',
        latitude: 41.39148,
        longitude: 2.164981,
        category: 'SIGHTS',
        rank: 100,
        tags: JSON.stringify([
          'sightseeing',
          'sights',
          'museum',
          'landmark',
          'restaurant',
          'tourguide',
          'historicplace',
          'historic',
          'attraction',
          'commercialplace',
          'activities',
          'shopping',
          'events',
        ]),
        pictures: JSON.stringify([
          'https://images.example.com/casa-amatller-facade.jpg',
          'https://images.example.com/casa-amatller-details.jpg',
        ]),
        createdAt: now,
        updatedAt: now,
      },
      {
        id: '30601A1A90',
        type: 'location',
        subType: 'POINT_OF_INTEREST',
        name: 'Tapas 24',
        latitude: 41.390785,
        longitude: 2.167414,
        category: 'RESTAURANT',
        rank: 100,
        tags: JSON.stringify([
          'restaurant',
          'tapas',
          'traditionalcuisine',
          'sightseeing',
          'commercialplace',
          'transport',
          'patio',
          'garden',
          'activities',
          'bar',
        ]),
        createdAt: now,
        updatedAt: now,
      },
      {
        id: '15C8B8148C',
        type: 'location',
        subType: 'POINT_OF_INTEREST',
        name: 'Dry Martini',
        latitude: 41.392677,
        longitude: 2.153942,
        category: 'NIGHTLIFE',
        rank: 100,
        tags: JSON.stringify([
          'bar',
          'restaurant',
          'nightlife',
          'club',
          'sightseeing',
          'attraction',
          'activities',
        ]),
        createdAt: now,
        updatedAt: now,
      },
      {
        id: 'BD29CF2CCD',
        type: 'location',
        subType: 'POINT_OF_INTEREST',
        name: 'Con Gracia',
        latitude: 41.399193,
        longitude: 2.159853,
        category: 'RESTAURANT',
        rank: 100,
        tags: JSON.stringify([
          'restaurant',
          'sightseeing',
          'commercialplace',
          'professionalservices',
          'activities',
        ]),
        createdAt: now,
        updatedAt: now,
      },
      {
        id: '24DE6CE737',
        type: 'location',
        subType: 'POINT_OF_INTEREST',
        name: 'Osmosis',
        latitude: 41.390198,
        longitude: 2.156974,
        category: 'RESTAURANT',
        rank: 100,
        tags: JSON.stringify([
          'restaurant',
          'shopping',
          'transport',
          'professionalservices',
        ]),
        createdAt: now,
        updatedAt: now,
      },
    ]);
  },

  async down(queryInterface, Sequelize) {
    await queryInterface.bulkDelete('points_of_interest', {
      id: {
        [Sequelize.Op.in]: [
          '9CB40CB5D0',
          '4690B83DCA',
          '3EF139D861',
          'AB3F122E3E',
          '752402FCA2',
          '5F1CED3994',
          '30601A1A90',
          '15C8B8148C',
          'BD29CF2CCD',
          '24DE6CE737',
        ],
      },
    });
  },
};
